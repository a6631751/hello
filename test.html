<script>
if ('WebSocket' in window) {
    console.log("websocket supported");
    var socket = new WebSocket("ws://localhost:8080//websocket/anonymous");
    //var socket = new WebSocket("ws://localhost:8080//websocket/login");

    console.log("connecting");

    var json = {
        sid: "121211221",
        //sid: "none",
        text: "wo cao",
        tid: "bruce"
    };

    socket.onopen = function() {
        console.log("connection to server opened!");
        socket.send(JSON.stringify(json));
    }

    socket.onclose = function() {
        console.log("connection to server closed!");
    }

    socket.onmessage = function(event) {
        var msg = event.data;
        console.log(msg);
    }

} else {
    console.log("websocket not supported");
}
</script>
